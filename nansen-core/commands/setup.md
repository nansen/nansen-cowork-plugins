---
description: Set up the Nansen intelligence ecosystem for a new team member
allowed-tools: Read, Write, Edit, Bash(ls:*), Bash(mkdir:*), Bash(cp:*), Bash(find:*), Bash(test:*), Bash(cat:*), Bash(echo:*), Bash(date:*), Bash(python3:*)
---

Walk the user through setting up Nansen's intelligence ecosystem on their machine. Follow these steps in order, checking status at each stage before moving on. Be conversational and helpful -- the user may not be technical. Use clear language and explain what each step does and why.

## Step 1 -- Check folder access

Check if a workspace folder is currently connected by listing the contents of the mounted directory. Look for a `nansen` directory or the nansen-core plugin folder.

If no folder is connected:
- Tell the user: "First, I need access to your Nansen workspace folder. Click the folder icon in the sidebar and select the folder where you keep your Nansen work (or where you'd like to set one up)."
- Wait for them to confirm, then re-check.

If a folder IS connected, check what already exists. Look for:
- `nansen/sources/` directory
- `nansen/intelligence/` directory
- `nansen/outputs/` directory
- `.nansen-config.json` file

Report what you find. If everything exists and the config file is present, ask if they want to re-run setup or if they're all set.

## Step 2 -- Create folder structure

Create the three core directories if they don't already exist:

```
nansen/
├── sources/          # Raw input files (PDFs, transcripts, notes)
├── intelligence/     # Extracted knowledge (synced to Google Drive)
└── outputs/          # Generated deliverables (reports, docs, analysis)
```

For each directory, create it and add a brief README.md inside explaining its purpose:

**sources/README.md**: "This folder holds your raw source material - meeting transcripts from Fathom, PDFs, research documents, email exports, and notes. Drop files here and use the Market Research skill to extract intelligence from them."

**intelligence/README.md**: "This is the team knowledge base. Intelligence files here are synced to Google Drive so everyone on the team can access them. Don't edit these manually - they're generated by extraction skills and follow a specific format (YAML frontmatter + markdown)."

**outputs/README.md**: "This folder holds deliverables generated from intelligence - client reports, analysis documents, presentations, and other outputs. These stay local to your machine."

After creating, confirm: "Your folder structure is ready. Here's what I set up: [list the three folders with a brief description of each]."

## Step 3 -- Google Drive for Desktop

This step connects the intelligence/ folder to a shared Google Drive so the whole team can access extracted knowledge.

Check if Google Drive for Desktop is installed by looking for common mount points:
- macOS: `/Volumes/GoogleDrive/` or `~/Library/CloudStorage/GoogleDrive-*/`
- Also check: `~/Google Drive/` or `/Users/*/Google Drive/`

If Google Drive for Desktop is found:
- Tell the user what you found
- Ask them to confirm which Google Drive account they want to use (they may have multiple)
- Ask for the name of the Shared Drive or folder where team intelligence should live (e.g., "Nansen Intelligence" or "Nansen Shared/intelligence")
- Note: For the POC, we're pointing intelligence/ to a specific Google Drive location. The user may need to create a Shared Drive folder first.

If Google Drive for Desktop is NOT found:
- Explain: "Google Drive for Desktop syncs files between your computer and Google Drive automatically. We need it so your intelligence/ folder stays in sync with the team."
- Point them to: https://www.google.com/drive/download/
- Tell them to install it, sign in with their Nansen Google account, and come back
- Wait for confirmation, then re-check

Once Drive is confirmed:
- Record the Drive mount path in the config
- Explain that intelligence/ will be the folder that syncs -- when they or any skill writes an intelligence file, it automatically becomes available to the whole team

**Important**: Don't try to create symlinks or move folders around automatically. Just record the paths and explain the manual step: "You'll need to either move your intelligence/ folder into Google Drive, or set up Google Drive to sync that specific folder. The easiest approach for the POC is to create a 'Nansen Intelligence' folder in your Shared Drive and use that as your intelligence/ location."

## Step 4 -- Fathom connection (optional for POC)

Fathom (https://fathom.video) records and transcribes meetings. If the user has a Fathom account, we can pull transcripts directly.

Ask: "Do you use Fathom for meeting recordings? If so, I can help connect it so we can pull transcripts automatically."

If yes:
- Direct them to https://developers.fathom.ai/ to get their API key
- Ask them to paste their API key
- Store the key reference in the config (note: for POC, we'll validate this manually)
- Explain: "For now, you can also just drop Fathom transcript files directly into sources/ and we'll process them from there."

If no or they want to skip:
- That's fine -- they can always add files to sources/ manually
- Note this in the config as `fathom_connected: false`

## Step 5 -- Slack verification

Check if the Slack MCP connector is available by looking at the current conversation context. The Slack connector should already be set up in Cowork.

If Slack is available:
- Run a quick test search to confirm it's working
- Note: "Slack is connected. Skills can search your Slack workspace for relevant messages and threads."

If Slack doesn't appear to be connected:
- Explain: "The Slack connector lets skills search your workspace for relevant context. You can set it up in Cowork's connector settings."
- This is optional for POC -- note in config and move on

## Step 6 -- Generate config file

Create `.nansen-config.json` in the workspace root with the collected information:

```json
{
  "version": "1.0.0",
  "setup_date": "[ISO-8601 timestamp]",
  "setup_by": "[user name from conversation]",
  "workspace_paths": {
    "sources": "[absolute path to sources/]",
    "intelligence": "[absolute path to intelligence/]",
    "outputs": "[absolute path to outputs/]"
  },
  "google_drive": {
    "installed": true/false,
    "mount_path": "[detected path or null]",
    "shared_drive_folder": "[user-specified or null]",
    "sync_configured": true/false
  },
  "fathom": {
    "connected": true/false,
    "api_key_set": true/false
  },
  "slack": {
    "mcp_connected": true/false
  },
  "pilot_group": true
}
```

Write this file and confirm: "Your config is saved. Here's a summary of your setup."

## Step 7 -- Verification diagnostic

Run a quick health check to make sure everything is working:

1. **Folder check**: Verify all three directories exist and are writable
2. **Write test**: Create a small test file in intelligence/ called `_setup-verification.intelligence.md` with proper YAML frontmatter:

```markdown
---
title: Setup Verification Test
date: [today's date]
source_type: document
domains:
  - team-insights
version: 1
updated: [ISO-8601 now]
updated_by: nansen-core setup
---

# Setup Verification

This file was created by the /setup command to verify the intelligence pipeline is working correctly. You can safely delete this file.

Setup completed on [date] by [user name].
```

3. **Config check**: Read back the config file and confirm it's valid JSON
4. **Drive sync note**: If Drive is configured, remind the user to check that the test file appears in their Shared Drive within a minute or two

Present results as a checklist:
- Folder structure: PASS/FAIL
- Intelligence file creation: PASS/FAIL
- Config file: PASS/FAIL
- Google Drive: CONFIGURED/SKIPPED
- Fathom: CONNECTED/SKIPPED
- Slack: CONNECTED/SKIPPED

## Wrap up

End with next steps:
- "You're all set! Here's what you can do next:"
- "Run `/onboarding` for a guided tour of how everything works"
- "Drop a PDF or transcript into sources/ and ask me to extract intelligence from it"
- "Ask me to run the Market Research skill on any source file"
